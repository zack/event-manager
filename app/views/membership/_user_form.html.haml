#user_form.form
  - if !@subscriber.uuid
    .notice
      <strong>Please use a name that I'll recognize.</strong> I want to make sure I know who's getting these emails. &#9786;

  - elsif !@subscriber.email_confirmed
    .notice.warning
      <strong>You have not confirmed your email address.</strong>
      Please check your inbox for a confirmation email.
      = link_to 'Resend?', { controller: 'membership', action: 'resend_confirmation_email', uuid: @subscriber.uuid }


  = form_for(subscriber, url: submit_url) do |f|
    - if @subscriber.errors.any?
      %ul#errors.notice.warning
        - @subscriber.errors.full_messages.each do |err|
          %li
            =err

    .option.text
      = f.label :first_name
      = f.text_field :first_name

    .option.text
      = f.label :last_name
      = f.text_field :last_name

    .option.text
      = f.label :email_address
      = f.text_field :email_address

    .checkboxes
      = collection_check_boxes :subscriber,
                               :subscription_list_ids,
                               SubscriptionList.all,
                               :id,
                               lambda {|l| "#{l.name} (#{l.description})"} do |b|
        .option
          = b.check_box
          = b.label

    - if subscriber.uuid
      = f.hidden_field :uuid, :value => subscriber.uuid
    .actions
      = f.submit 'Submit'
      - if subscriber.uuid
        = link_to 'Delete My Account', { controller: 'membership', action: 'delete', uuid: subscriber.uuid }, id: 'delete'
